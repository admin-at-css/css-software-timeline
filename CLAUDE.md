# CLAUDE.md - CSS Software Timeline

## Overview
React-based dashboard for tracking software projects within the CSS team. Features Gantt charts, project cards, filtering, and multi-view dashboard.

## Tech Stack
- React 19 + Vite 7 + TypeScript
- Tailwind CSS v4
- frappe-gantt v1.0.4 for Gantt charts
- js-yaml for YAML parsing

## Development Commands
```bash
npm run dev      # Start development server (port 5173)
npm run build    # Build for production
npm run lint     # Run ESLint
npm run preview  # Preview production build
```

## Project Structure
```
src/
├── components/
│   ├── Dashboard/       # DashboardView, SummaryStats, ProjectCardsGrid
│   ├── GanttChart/      # GanttChart, GanttLegend, GanttControls
│   ├── Import/          # ImportButton (YAML import)
│   ├── Layout/          # Header, FilterBar
│   ├── ProjectList/     # ProjectList, ProjectCard
│   ├── ProjectView/     # ProjectView, tabs (Details, Gantt, Tasks, Activity)
│   └── Export/          # ExportButton
├── hooks/
│   ├── useProjects.ts   # Project state management + localStorage
│   └── useGanttData.ts  # Transform projects to Gantt format
├── types/
│   └── project.ts       # TypeScript interfaces
└── utils/
    ├── yamlParser.ts    # YAML parsing + validation
    └── colorUtils.ts    # Status/priority colors
```

## Timeline Tracking

This project uses `timeline.yaml` for progress tracking (dogfooding!).

### Automatic Updates
After completing significant work, update `timeline.yaml` in the project root:

1. **When completing a task:**
   - Set `status: "completed"`
   - Set `progress: 100`
   - Update `actualHours` with time spent

2. **When starting a task:**
   - Set `status: "in_progress"`
   - Update `progress` percentage (estimate)

3. **When blocked:**
   - Set `status: "blocked"`
   - Add a comment explaining the blocker

4. **When logging hours:**
   - Update `actualHours` field for the task
   - Update project-level `actualHours` (sum of all tasks)

### Task Status Values
- `pending` - Not started
- `in_progress` - Currently working
- `completed` - Done
- `blocked` - Can't proceed (explain in comments)

### Handling Dynamic Changes (Living Timeline)

Projects evolve. When new features or tasks are discovered:

```yaml
# Insert new task in logical order, update dependencies
- id: "new-feature"
  name: "New Feature Name"
  description: "Why this was added"
  startDate: "2025-01-05"
  endDate: "2025-01-08"
  estimatedHours: 8
  status: "pending"
  progress: 0
  dependencies: ["previous-task"]
  # Added: 2025-01-05 - discovered during implementation
```

**Key rules:**
- Insert new tasks with proper dependencies
- Use YAML comments to note when/why tasks were added
- Update downstream task dependencies as needed
- Keep task IDs stable (don't rename existing IDs)

### Update Metadata
Always update the timestamp after changes:
```yaml
metadata:
  lastUpdated: "2025-01-05T10:00:00Z"  # Current ISO timestamp
```

## Known Issues / Workarounds

### frappe-gantt CSS Conflicts
- Tailwind's CSS reset breaks frappe-gantt grid lines
- Solution: Custom CSS overrides in `src/index.css`
- See: `docs/learnings/frappe-gantt-debugging.md`

### frappe-gantt Custom Fields
- frappe-gantt doesn't preserve custom fields (like `_meta`)
- Solution: Use `taskMap` lookup in popup callback
- Task IDs format: `${projectId}__${taskId}`

## Important Notes
- Don't add co-authored-by Claude on commit messages
- Do not make assumptions; ask clarifying questions if needed
- Test YAML imports after making parser changes


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>