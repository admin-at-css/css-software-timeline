<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>

# Instructions for Claude Code: Managing timeline.yaml

This document covers both **creating** and **updating** timeline.yaml files for the CSS Software Timeline dashboard.

## Quick Navigation

**What do you need to do?**

| Task | Go to |
|------|-------|
| Create a NEW timeline.yaml | → **Part A** (below) |
| Update an EXISTING timeline.yaml | → **Part B** or check project's CLAUDE.md |

> **Note:** After creating a timeline.yaml, update instructions are added to the project's main CLAUDE.md, so you won't need this file for future updates.

---

# Part A: Creating a New timeline.yaml

When asked to create a `timeline.yaml` file for this project, **DO NOT immediately ask the user questions**. You have access to the entire codebase - use it!

## Step 1: Explore the Codebase First

Before asking anything, gather information from:

1. **README.md** - Project name, description, purpose
2. **package.json / Cargo.toml / etc.** - Project metadata, dependencies, scripts
3. **Git history** - Run these commands:
   ```bash
   git log --oneline --reverse | head -1   # First commit = approximate start date
   git log --oneline | head -10            # Recent activity
   git log --format="%ad" --date=short | sort | uniq | wc -l  # Days with commits
   ```
4. **Git branches** - Check for feature branches (worktrees):
   ```bash
   git branch -a                           # List all branches (local + remote)
   git branch --list                       # Local branches only
   git branch -vv                          # Branches with last commit info
   ```
   **Interpreting branches:**
   - `feature/*` or `feat/*` branches = features in progress
   - `fix/*` or `bugfix/*` branches = bug fixes being worked on
   - Branches not merged to main = ongoing work (potential tasks)
   - Recently active branches = current focus areas

5. **Source code structure** - Identify major features/modules
6. **Existing documentation** - Any specs, design docs, or notes

## Step 2: Infer What You Can

From your exploration, determine:

| Field | How to Infer |
|-------|--------------|
| `id` | Repository/folder name, lowercase with dashes |
| `name` | From README title or package.json name |
| `description` | From README or package.json description |
| `status` | From code completeness: has tests? deployed? README says "WIP"? |
| `startDate` | First git commit date |
| `repository.url` | From `git remote -v` |
| `tasks` | From code structure, feature branches, and modules |

**Identify tasks from multiple sources:**
- **Code structure**: Major folders/modules = potential phases or features
- **Feature branches**: Each unmerged `feature/*` branch = task in progress
- **Merged branches**: Recently merged branches = completed tasks
- **Git log messages**: Patterns like "Add X", "Implement Y" reveal features

**Estimate hours based on codebase size:**
- Small project (<1000 LOC): 20-40 hours
- Medium project (1000-5000 LOC): 40-100 hours
- Large project (5000+ LOC): 100+ hours

**Estimate task progress based on:**
- Feature has tests = likely complete
- Feature has TODO comments = in progress
- Feature folder exists but empty/minimal = pending

## Step 3: Only Ask What You Cannot Determine

After exploring, you should ONLY need to ask:

1. **Priority level** - `critical` | `high` | `medium` | `low`
2. **Priority reason** - Why this priority? (for stakeholders)
3. **Target end date** - When should this ship? (if not already deployed)
4. **Actual hours spent** - Offer estimation OR manual input (see below)
5. **Corrections** - "I found X, Y, Z - is this accurate?"

### Handling Actual Hours (Interactive)

**Don't just ask "how many hours?"** - the user may not know. Instead, offer two options:

> **For actual hours spent, would you like me to:**
>
> **A) Estimate using industry best practices** - I'll calculate based on:
>    - Project complexity and codebase size
>    - Days with git commits × average focus hours
>    - Standard ratios for solo development work
>
> **B) Enter manually** - You provide the actual number
>
> Note: Hours include ALL work, not just coding:
> - Brainstorming & ideation
> - Research & learning
> - Planning & design
> - Coding & implementation
> - Testing & debugging
> - Documentation

**If user chooses Option A (Estimate), use this formula:**

```
Actual Hours = (Days with commits × Hours per active day) × Non-coding multiplier

Where:
- Days with commits = git log --format="%ad" --date=short | sort | uniq | wc -l
- Hours per active day = 3-4 hours (realistic for solo dev with other responsibilities)
- Non-coding multiplier = 1.5x (accounts for thinking, research, planning)

Example:
- 20 days with commits
- 3.5 hours average per day
- 1.5x multiplier for non-coding work
- Actual hours = 20 × 3.5 × 1.5 = 105 hours
```

**Additional estimation factors:**
- If project has complex integrations: add 20%
- If project required learning new tech: add 30%
- If project has documentation: add 10%
- If project started from scratch (no boilerplate): add 25%

**Example prompt after exploration:**

> I've analyzed the codebase and here's what I found:
>
> - **Project**: CSS Chrome Extension
> - **Description**: Browser extension for CSS team productivity
> - **Started**: November 15, 2024 (first commit)
> - **Status**: In progress (~70% complete based on code)
> - **Estimated total hours**: ~80 hours (based on codebase size)
>
> **Tasks I identified:**
> 1. Extension Setup (completed - manifest.json exists, basic structure done)
> 2. Core Features (in progress - popup and content scripts partially implemented)
> 3. Polish & Testing (pending - no tests yet)
>
> **I need from you:**
>
> 1. **Priority level?** (critical/high/medium/low)
>
> 2. **Why this priority?** (one sentence for stakeholders)
>
> 3. **Target completion date?**
>
> 4. **Actual hours spent so far:**
>    - **Option A**: I estimate ~52 hours based on 15 active days × 3.5 hrs × 1.0 (chrome extension is familiar tech). Want me to use this?
>    - **Option B**: Enter your own number

## Step 4: Create timeline.yaml

Choose the appropriate template:
- **`timeline-minimal.yaml`** - For idea/planning phase projects
- **`timeline-full.yaml`** - For active development with clear phases

Create `timeline.yaml` in the project root with:
- All inferred values filled in
- User-provided values for priority, hours, dates
- `metadata.lastUpdated` set to current ISO timestamp

## Step 5: Validate

Check that:
- [ ] All required fields present
- [ ] Dates in YYYY-MM-DD format
- [ ] Valid status/priority enum values
- [ ] At least one stakeholder (default: Kevin Zakaria, Developer)
- [ ] At least one task with valid dependencies
- [ ] Progress values 0-100

## Step 6: Add Update Instructions to Project CLAUDE.md

Before deleting the timeline-templates folder, add this section to the project's main `CLAUDE.md` file. This ensures future timeline updates can be handled without needing this folder.

**Add this to the project's CLAUDE.md:**

```markdown
## Timeline Tracking (timeline.yaml)

This project uses timeline.yaml for the CSS Software Timeline dashboard.

### Updating timeline.yaml

When asked to update timeline.yaml:

1. **Read current file first** - understand structure, preserve task IDs
2. **Use git history for facts**:
   ```bash
   git log --oneline --reverse | head -1   # True start date
   git log --format="%ad" --date=short | sort | uniq | wc -l  # Active days
   ```
3. **Common updates**:
   - Correcting dates → use git log for truth
   - Adjusting hours → formula: (days × 3.5 hrs) × 1.5
   - Adding tasks → insert with dependencies, add comment with date
   - Changing status → update status + progress + actualHours together
4. **Always update** `metadata.lastUpdated` timestamp
5. **Commit**: `git commit -m "Update timeline.yaml: <description>"`

### Status Values
- Project: `draft` | `planning` | `in_progress` | `on_hold` | `completed` | `cancelled`
- Task: `pending` | `in_progress` | `completed` | `blocked`
```

## Step 7: Clean Up & Commit

After adding update instructions to the project's CLAUDE.md:

```bash
# Delete the timeline-templates folder (no longer needed)
rm -rf timeline-templates/

# Commit timeline.yaml and updated CLAUDE.md
git add timeline.yaml CLAUDE.md
git commit -m "Add timeline.yaml for CSS Software Timeline dashboard"
git push
```

**What gets committed:**
- `timeline.yaml` - The project's timeline data
- `CLAUDE.md` - Updated with timeline update instructions

**What should NOT be committed:**
- `timeline-templates/` folder - Temporary tool, delete after use

---

# Part B: Updating an Existing timeline.yaml

When asked to update an existing `timeline.yaml`, follow this workflow. **Make minimal, targeted changes** - don't restructure unless explicitly asked.

## Step 1: Read Current timeline.yaml

Always read the existing file first to understand:
- Current structure and task organization
- Existing task IDs (these must be preserved)
- Current progress and hours values
- Any YAML comments with context

## Step 2: Verify Facts with Git History

Use git commands to verify or discover accurate information:

```bash
# True project start date
git log --oneline --reverse | head -1

# Find when specific work started (search commit messages)
git log --oneline --all --grep="<keyword>"

# Activity in a date range
git log --after="2024-09-01" --before="2024-10-01" --oneline

# Days with commits (for hours estimation)
git log --format="%ad" --date=short | sort | uniq | wc -l

# Commits per phase/feature (if tagged or in messages)
git log --oneline | grep -i "<phase-name>"
```

## Step 3: Common Update Scenarios

### Correcting Start/End Dates

```yaml
# Before (incorrect)
startDate: "2025-11-09"

# After (corrected from git history)
startDate: "2024-09-15"  # Corrected: first commit was Sept 15
```

Use git log to find the true first commit date. Add a YAML comment explaining the correction.

### Adjusting Hours (Task or Project Level)

```yaml
# Task-level hours update
- id: "phase-1-core"
  estimatedHours: 40
  actualHours: 65  # Updated: recalculated from git activity

# Project-level hours (should equal sum of task actualHours)
project:
  estimatedHours: 160
  actualHours: 130  # Updated: sum of all task actualHours
```

**Re-estimation formula:**
```
Task Hours = (Days with commits for that phase × 3.5 hrs) × 1.5
```

To find commits for a specific phase:
```bash
git log --after="<phase-start>" --before="<phase-end>" --format="%ad" --date=short | sort | uniq | wc -l
```

### Adding New Tasks

Insert new tasks in logical order with proper dependencies:

```yaml
tasks:
  - id: "existing-task"
    # ... existing content

  # Added: 2026-01-08 - discovered during review
  - id: "new-feature"
    name: "New Feature Name"
    description: "What this task accomplishes"
    startDate: "2026-01-10"
    endDate: "2026-01-15"
    estimatedHours: 8
    status: "pending"
    progress: 0
    dependencies: ["existing-task"]
    assignee: "Kevin Zakaria"
    type: "task"

  - id: "next-task"
    dependencies: ["new-feature"]  # Update if needed
```

**Key rules:**
- Use descriptive, kebab-case IDs
- Add YAML comment with date and reason for addition
- Update dependencies of downstream tasks if needed

### Changing Task Status

Always update status AND progress together:

| Status Change | Also Update |
|---------------|-------------|
| `pending` → `in_progress` | `progress: 10-90` (estimate) |
| `in_progress` → `completed` | `progress: 100`, `actualHours` |
| Any → `blocked` | Add comment explaining blocker |

```yaml
# Marking a task complete
- id: "phase-2-features"
  status: "completed"      # Changed from in_progress
  progress: 100            # Must be 100 for completed
  actualHours: 45          # Fill in actual time spent
```

### Marking a Phase/Milestone Complete

```yaml
# Phase task
- id: "phase-2-features"
  status: "completed"
  progress: 100
  actualHours: 45  # Actual hours for this phase

# Associated milestone
- id: "milestone-v2"
  status: "completed"
  progress: 100
```

After completing a phase, update the project-level `actualHours`:
```yaml
project:
  actualHours: 130  # Updated: sum of all completed task hours
```

### Adding Backlog Items

```yaml
backlog:
  - id: "new-backlog-item"
    name: "Feature Request Name"
    description: |
      Detailed description of what this would do
      and why it's valuable.
    priority: "medium"
    estimatedHours: 8
    status: "idea"  # or "approved" if greenlit
    requestedBy: "Kevin Zakaria"
    dateAdded: "2026-01-08"
```

## Step 4: Update Metadata

**Always** update the lastUpdated timestamp:

```yaml
metadata:
  lastUpdated: "2026-01-08T21:00:00Z"  # Current ISO timestamp
  schemaVersion: "1.0.0"
```

## Step 5: Validate Changes

Before committing, verify:
- [ ] Task IDs unchanged (never rename existing IDs)
- [ ] Dependencies still valid (no circular refs)
- [ ] Progress values 0-100
- [ ] Dates in YYYY-MM-DD format
- [ ] `actualHours` sum matches project-level value
- [ ] `lastUpdated` timestamp updated

## Step 6: Commit with Descriptive Message

```bash
git add timeline.yaml
git commit -m "Update timeline.yaml: <brief description of changes>"
git push
```

Example commit messages:
- `Update timeline.yaml: correct project start date to Sept 2024`
- `Update timeline.yaml: mark Phase 2 complete, add actual hours`
- `Update timeline.yaml: add deletion audit system to backlog`

---

# Quick Reference

## Project Status
| Status | When to Use |
|--------|-------------|
| `draft` | Just an idea, no code yet |
| `planning` | Designing, no implementation |
| `in_progress` | Active development |
| `on_hold` | Paused |
| `completed` | Shipped/Done |
| `cancelled` | Abandoned |

## Task Status
| Status | Indicators |
|--------|------------|
| `pending` | Folder/file doesn't exist or is empty |
| `in_progress` | Has code but incomplete, TODOs present |
| `completed` | Feature works, has tests, no TODOs |
| `blocked` | Depends on external factor |

## Priority
| Level | Meaning |
|-------|---------|
| `critical` | Blocking other work, must ship ASAP |
| `high` | Important, prioritize this |
| `medium` | Normal priority |
| `low` | Nice to have, can wait |

## Hours Estimation Formula
```
Actual Hours = (Days with commits × 3.5 hrs) × 1.5

Adjustments:
+20% for complex integrations
+30% for learning new tech
+10% for documentation
+25% for starting from scratch
```

---

# Key Principles

**For Creating:**
- You have full codebase access - use it before asking questions
- Only ask for information that requires human input (priorities, business context)

**For Updating:**
- Make minimal, targeted changes
- Preserve existing task IDs - never rename them
- Use git history as source of truth for dates and activity
- Always update `metadata.lastUpdated`
- Add YAML comments explaining significant changes
